<section class="body-main view_orders ">
    <div class="container-fluid">
        <div class="view_order">
            <!--<div class="search-content">
                <div class="row">
                    <div class="col-md-6">
                        <div class="period ">
                            <span>FROM</span>
                            <div class="input-group date date1">
                                <input type="text" class="form-control cal-input" uib-datepicker-popup="{{format}}" ng-model="dt" is-open="popup1.opened"
                                    datepicker-options="dateOptions" ng-required="true" close-text="Close" alt-input-formats="altInputFormats"
                                />
                                <span class="input-group-btn">
                        <button type="button" class="btn btn-default cal-btn" ng-click="open1()"><i class="fa fa-calendar"></i></button>
                      </span>
                            </div>
                            <span>TO</span>
                            <div class="input-group date">
                                <input type="text" class="form-control cal-input" uib-datepicker-popup="{{format}}" ng-model="dt" is-open="popup2.opened"
                                    datepicker-options="dateOptions" ng-required="true" close-text="Close" alt-input-formats="altInputFormats"
                                />
                                <span class="input-group-btn">
                       <button type="button" class="btn btn-default cal-btn" ng-click="open2()"><i class="fa fa-calendar"></i></button>
                     </span>
                            </div>
                            <span class="input-group-btn search-i">
                      <i class="btn btn-default fa fa-search" aria-hidden="true"></i>
                    </span>
                        </div>
                    </div>
                  
                </div>
            </div>-->
            <div ng-if="detailBill==''">
                <h3 class="text-center">No data Found</h3>
            </div>
            <div ng-if="detailBill==undefined">
                <h3 class="text-center">Loading...</h3>
            </div>
            <div ng-if="detailBill!=undefined">
                <div class="order-heading">
                    <label> ORDER ID TB{{detailBill.order.orderId}}_{{detailBill.orderBillId}} </label>
                    <!--<span class="pull-right refresh">Refresh</span>
                    <span class="pull-right">Edit</span>-->
                </div>
                <div class="row">
                    <div class="col-md-4">
                        <div class="details">
                            <div class="head">
                                <h2>BUYER</h2>
                            </div>
                            <div class="info">
                                <p>{{detailBill.buyer.firstName}} {{detailBill.buyer.lastName}}</p>
                                <p>{{detailBill.order.delivery[0].deliveryFirmName}}<br/> {{detailBill.order.delivery[0].deliveryAddress}}
                                    <br/> {{detailBill.order.delivery[0].deliveryCity}}- {{detailBill.order.delivery[0].deliveryPincode}}
                                    <br/> {{detailBill.order.delivery[0].deliveryState.name}} {{detailBill.order.delivery[0].deliveryCountry}}
                                </p>
                                <p> Contact: {{detailBill.buyer.mobile}}</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="details">
                            <div class="head">
                                <h2>SELLER</h2>
                            </div>
                            <div class="info">
                                <p>{{detailBill.inventory.seller.firmName}}</p>
                                <p> {{detailBill.warehouse.warehouseFirmName}},<br/> {{detailBill.warehouse.warehouseAddress}},
                                    <br/> {{detailBill.warehouse.warehouseCity}}-{{detailBill.warehouse.warehousePincode}},
                                    <br/> {{detailBill.warehouse.warehouseState.name}}, {{detailBill.warehouse.warehouseCountry}}
                                </p>
                                <p> Contact:{{detailBill.inventory.seller.mobile}}</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="details">
                            <div class="head">
                                <h2>ORDER</h2>
                            </div>
                            <div class="info">
                                Order ID TB{{detailBill.order.orderId}}
                                <br> Dispatched Date: {{detailBill.orderDispatchedTimestamp | date:'dd MMMM yyyy'}}
                                <br> Dispatched Time: {{detailBill.orderDispatchedTimestamp | date:'h:mma'}}
                                <br> Delivery Date: {{detailBill.orderDeliveredTimestamp | date:'dd MMMM yyyy'}}
                                <br> Delivery Time: {{detailBill.orderDeliveredTimestamp | date:'h:mma'}}
                                <br>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="alloted-bars">
                        <div class="progress">
                            <div class="progress-bar">
                                <div class="bar-color lgcolor"></div>
                                <div class="circle green-color">
                                    <!-- <span>0</span> -->
                                </div>
                                <div class="mile">
                                    <p>Order Placed</p>
                                    <p>{{detailBill.createdAt |date : "dd/MM/y"}}</p>
                                </div>
                            </div>
                            <div class="progress-bar">
                                <div class="bar-color lgcolors"></div>
                                <div class="circle blue-color">
                                    <!-- <span>5</span> -->
                                </div>
                                <div class="mile">
                                    <p>Payment of Order</p>
                                    <p>{{detailBill.order.paymentTimeStamp| date:"dd/MM/y"}}</p>
                                </div>
                            </div>
                            <div class="progress-bar">
                                <div class="bar-color lgcolor"></div>
                                <div class="circle green-color">
                                    <!-- <span>6</span> -->
                                </div>
                                <div class="mile">
                                    <p>Order Dispatched</p>
                                    <p>{{detailBill.orderDispatchedTimestamp| date:"dd/MM/y"}}</p>
                                </div>
                            </div>
                            <div class="progress-bar">
                                <div class="bar-color"></div>
                                <div class="circles green-color">
                                    <!-- <span>5</span> -->
                                </div>
                                <div class="mile miles">
                                    <p>Order Delivered</p>
                                    <p>{{detailBill.orderDispatchedTimestamp| date:"dd/MM/y"}}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row ">
                    <div class="col-md-12 ">
                        <div class="ordertable ">
                            <table class="table table-bordered ">
                                <thead class="text-uppercase font-karla-bold ">
                                    <th>Order Id</th>
                                    <th colspan="2 ">Order details</th>
                                    <th>Rate</th>
                                    <th>Qty</th>
                                    <th>Amount</th>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>{{detailBill.order.orderId}}_{{detailBill.orderBillId}}</td>
                                        <td>Product</td>
                                        <td>{{detailBill.inventory.moc.name}} {{detailBill.inventory.type.name}} {{detailBill.inventory.category.name}}
                                        </td>
                                        <td><span ng-if="detailBill.inventory.category.name == 'Pipes'">{{detailBill.inventory.finalPrice}} per meter</span>
                                            <span ng-if="detailBill.inventory.category.name != 'Pipes'">{{detailBill.inventory.finalPrice}} kg</span>
                                        </td>
                                        <td><span ng-if="detailBill.inventory.category.name != 'Coil'">{{detailBill.qty}} </span>
                                            <span ng-if="detailBill.inventory.category.name === 'Coil'">1</span>
                                        </td>
                                        <td>{{detailBill.price}}</td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td>Seller Name</td>
                                        <td>
                                            {{detailBill.inventory.seller.firstName}} {{detailBill.inventory.seller.lastName}}
                                            <!--<span uib-rating ng-model="rate " max="max " read-only="isReadonly
                                                " on-hover="hoveringOver(value) " class="table-rating " on-leave="overStar=null "
                                                            titles="[ 'one', 'two', 'three']
                                                " aria-labelledby="default-rating ">
                                                        </span>-->
                                        </td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td>Manufacturer</td>
                                        <td>{{detailBill.inventory.brand.name}},{{detailBill.inventory.coo.name}}</td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td>Material of Construction</td>
                                        <td>{{detailBill.inventory.moc.name}}</td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td>Standard / Grades</td>
                                        <td>{{detailBill.inventory.gradesstandards.name}}</td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <!--Pipes-->
                                    <tr ng-if="detailBill.inventory.category.name == 'Pipes'">
                                        <td></td>
                                        <td>OD (inches)</td>
                                        <td>{{detailBill.inventory.odInches}}</td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr ng-if="detailBill.inventory.category.name == 'Pipes'">
                                        <td></td>
                                        <td>OD (mm)</td>
                                        <td>{{detailBill.inventory.odMm}}</td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr ng-if="detailBill.inventory.category.name == 'Pipes'">
                                        <td></td>
                                        <td>SCH</td>
                                        <td>{{detailBill.inventory.sch}}</td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td>Thickness (mm)</td>
                                        <td>{{detailBill.inventory.thickness}}</td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr ng-if="detailBill.inventory.category.name == 'Pipes'">
                                        <td></td>
                                        <td>Total length (m)</td>
                                        <td>{{detailBill.sizeQtyLength}}</td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr ng-if="detailBill.inventory.category.name == 'Plates/Sheets'">
                                        <td></td>
                                        <td>Width</td>
                                        <td>{{detailBill.inventory.width}}</td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr ng-if="detailBill.inventory.category.name == 'Plates/Sheets'">
                                        <td></td>
                                        <td>Length</td>
                                        <td>{{detailBill.inventory.length}}</td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr ng-if="detailBill.inventory.category.name == 'Plates/Sheets'">
                                        <td></td>
                                        <td>Theoretical Weight per plate/sheet</td>
                                        <td>{{detailBill.inventory.theoreticalwt}}</td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr ng-if="detailBill.inventory.category.name == 'Coil'">
                                        <td></td>
                                        <td>Width</td>
                                        <td>{{detailBill.inventory.width}}</td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr ng-if="detailBill.inventory.category.name == 'Coil'">
                                        <td></td>
                                        <td>Length</td>
                                        <td>Coil</td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr ng-if="detailBill.inventory.category.name == 'Roundbar'">
                                        <td></td>
                                        <td>Diameter in MM</td>
                                        <td>{{detailBill.inventory.diameter}}</td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr ng-if="detailBill.inventory.category.name == 'Roundbar'">
                                        <td></td>
                                        <td>Length in MM</td>
                                        <td>{{detailBill.inventory.length}}</td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr class="border-none ">
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr class="border-none ">
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr class="border-none ">
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr class="border-none ">
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td>Price Per Kg</td>
                                        <td>{{detailBill.inventory.pricePerKg}}</td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td>Per KG Excise Modvat (included in price per kg)</td>
                                        <td>{{detailBill.inventory.exciseModvatPerKg}}</td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr ng-if="detailBill.inventory.category.name == 'Plates/Sheets'">
                                        <td></td>
                                        <td>Price per plate/sheet</td>
                                        <td>{{detailBill.inventory.pricePerProduct}}</td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr ng-if="detailBill.inventory.category.name == 'Plates/Sheets'">
                                        <td></td>
                                        <td>Excise Modvat per sheet (included in price per sheet)</td>
                                        <td>{{detailBill.inventory.exciseModvatPerProduct}}</td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr ng-if="detailBill.inventory.category.name == 'Coil'">
                                        <td></td>
                                        <td>Price per coil</td>
                                        <td>{{detailBill.inventory.pricePerProduct}}</td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr ng-if="detailBill.inventory.category.name == 'Coil'">
                                        <td></td>
                                        <td>Excise Modvat per coil (included in price per coil)</td>
                                        <td>{{detailBill.inventory.exciseModvatPerProduct}}</td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr ng-if="detailBill.inventory.category.name == 'Roundbar'">
                                        <td></td>
                                        <td>Per KG Excise Modvat (included in price per kg)</td>
                                        <td>{{detailBill.inventory.exciseModvatPerKg}}</td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-8">
                        <div class="comment-section">
                            <div class="form-group">
                                <label for="comment">COMMENTS</label>
                                <textarea class="form-control" rows="5" id="comment"></textarea>
                            </div>
                            <label class="add pull-right">ADD</label>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="summary ">
                            <table class="table table-bordered summary-data">
                                <tbody>
                                    <tr>
                                        <td>SUBTOTAL
                                        </td>
                                        <td>RS. {{detailBill.price}}
                                        </td>
                                    </tr>
                                    <!-- <tr>
                                  <td>CST(Central Service Tax)
                                  </td>
                                  <td>RS. xxx
                                  </td>
                              </tr> -->
                                    <tr ng-if="vat != 0">
                                        <td>VAT {{detailBill.inventory.vat}}%:
                                        </td>
                                        <td ng-if="vat != 0">
                                            Rs. {{vat}}
                                        </td>
                                    </tr>
                                    <tr ng-if="cst != 0">
                                        <td>CST {{detailBill.inventory.cst}}%:
                                        </td>
                                        <td ng-if="cst != 0">
                                            Rs. {{cst}}
                                        </td>
                                    </tr>
                                    <!--<tr>
                                    <td>DISCOUNT
                                    </td>
                                    <td>RS. 200.00
                                    </td>
                                </tr>-->
                                    <tr>
                                        <td>TRANSPORT
                                        </td>
                                        <td>RS. {{detailBill.transporterCharges}}
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>GRAND TOTAL
                                        </td>
                                        <td>RS. {{granTotal}}
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4">
                        <div class="details">
                            <div class="head">
                                <h2>PAYMENT STATUS</h2>
                            </div>
                            <div class="info1 vieworders1">
                                <div class="row">
                                    <div class="col-sm-12">
                                        <form class="form-horizontal" role="form">
                                            <div class="row">
                                                <div class="col-sm-6">
                                                    <div class="form-group">
                                                        <label class="control-label" for="">Payment Status : </label>
                                                    </div>
                                                </div>
                                                <div class="col-sm-6 no-padding">
                                                    <div class="">
                                                        <label class="control-label" for="">{{detailBill.order.paymentStatus}}</label>
                                                        <!--<select name="" id="" class="form-control">
                                            <option value="">Pending</option>
                                            <option value="">Paid</option>
                                        </select>-->
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-sm-6">
                                                    <div class="form-group">
                                                        <label class="control-label" for="">Payment Mode : </label>
                                                    </div>
                                                </div>
                                                <div class="col-sm-6 no-padding">
                                                    <div class="">
                                                        <label class="control-label" for="">{{detailBill.order.paymentMethod}}</label>
                                                        <!--<select name="" id="" class="form-control">
                                            <option value="">Pending</option>
                                            <option value="">Paid</option>
                                        </select>-->
                                                    </div>
                                                </div>
                                            </div>
                                            <!--<div class="text-center">
                                            <button type="button" class="btn btn-primary return mt5">SUBMIT</button>
                                        </div>-->
                                            <div class="row" ng-if="detailBill.order.paymentMethod==='NEFT / RTGS'">
                                                <div class="col-sm-6">
                                                    <div class="form-group">
                                                        <label class="control-label" for="">Transaction ID : </label>
                                                    </div>
                                                </div>
                                                <div class="col-sm-6 no-padding">
                                                    <div class=""> <label class="control-label" for="">{{detailBill.order.buyerTransactionID}}</label>
                                                                </div>
                                                </div>
                                            </div>
                                             <div class="row" ng-if="detailBill.order.paymentMethod==='NEFT / RTGS'">
                                                <div class="col-sm-6">
                                                    <div class="form-group">
                                                        <label class="control-label" for="">Bank Name : </label>
                                                    </div>
                                                </div>
                                                <div class="col-sm-6 no-padding">
                                                    <div class="">
                                                         <label class="control-label" for="">{{detailBill.order.paymentBankName}}</label>
                                                                </div>
                                                </div>
                                            </div>
                                                                                 <div class="row" ng-if="detailBill.order.paymentMethod==='NEFT / RTGS'">
                                                <div class="col-sm-6">
                                                    <div class="form-group">
                                                        <label class="control-label" for="">Date : </label>
                                                    </div>
                                                </div>
                                                <div class="col-sm-6 no-padding">
                                                    <div class="">
                                                         <label class="control-label" for="">{{detailBill.order.neftRtgsPaymentTimestamp | date:"dd MMMM yyyy "}}</label>
                                                                </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="details">
                            <div class="head">
                                <h2>DELIVERY STATUS</h2>
                            </div>
                            <div class="info1 vieworders1 ha delivery-status">
                                <div class="row">
                                    <div class="col-sm-12">
                                        <form novalidate ng-submit="updateBill(detailBill)" class="form-horizontal ng-pristine ng-valid">
                                            <div class="row">
                                                <div class="col-sm-6">
                                                    <div class="form-group">
                                                        <label class="control-label" for="">Delivery                                                            Status</label>
                                                        <!-- <div class="col-sm-6 text-center">
                                              <button type="button" class="btn btn-primary return">RETURN</button>
                                          </div> -->
                                                    </div>
                                                </div>
                                                <div class="col-sm-6 no-padding">
                                                    <select required ng-model="detailBill.deliveryStatus" name="status" id="" class="form-control">
                                              <option value="Pending">Pending</option>
                                              <option value="Dispatched">Dispatched</option>
                                              <option value="Delivered">Delivered</option>
                                              <option value="Returned">Returned</option>
                                          </select>
                                                </div>
                                            </div>
                                            <div class="form-group mbn">
                                                <p class="text-uppercase">XYZ Transporter</p>
                                            </div>
                                            <div class="form-group">
                                                <textarea name="Textstatus" ng-model="detailBill.transporterComment" class="form-control font-karla-bold trans">Dispatched From Bhivan...</textarea>
                                            </div>
                                            <div class="form-group">
                                                  TRANSPORTER RECEIPT
                                                <div class="attach order-attach">
                                                    <upload-image ng-model="detailBill.transporterReceiept"></upload-image>
                                                </div>
                                            </div>
                                            <div class="text-center subbtn">
                                                <button type="submit" class="btn btn-primary font-gotham-medium mt5 text-uppercase">Submit</button>
                                            </div>
                                            <!-- <div class="form-group">
                                            <label class="col-sm-6 control-label" for="">Change Status</label>
                                    <div class="col-sm-6">
                                      <select name="" id="" class="form-control">
                                          <option value="">Pending</option>
                                          <option value="">Dispatched</option>
                                          <option value="">Delivered</option>
                                          <option value="">Returned</option>
                                      </select>
                                    </div>

                                        </div> -->
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="details">
                            <div class="head">
                                <h2>ORDER STATUS</h2>
                            </div>
                            <div class="info1 vieworders1">
                                <div class="row">
                                    <div class="col-sm-12">
                                        <form ng-submit="updateBill(order)" class="form-horizontal" role="form">
                                            <div class="row">
                                                <div class="col-sm-6">
                                                    <div class="form-group">
                                                        <label class="control-label" for="">Order Status</label>
                                                    </div>
                                                </div>
                                                <div class="col-sm-6 no-padding">
                                                    <div class="">
                                                        <select ng-model="order.deliveryStatus" name="" id="" class="form-control">
                                            <option value="Active">Active</option>
                                            <option value="Returned">Cancelled</option>
                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-sm-6">
                                                    <div class="form-group">
                                                        <label class="control-label" for="">Comments Status</label>
                                                    </div>
                                                </div>
                                                <div class="col-sm-6 no-padding">
                                                    <div class="">
                                                        <textarea ng-model="order.orderCancelledComment"> </textarea>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="text-center">
                                                <!--<button type="submit" ng-change="updateBill(order)" ng-click="updateOrderStatus(order)" class="btn btn-primary return mt5">SUBMIT</button>-->
                                                 <button type="submit" class="btn btn-primary return mt5">SUBMIT</button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>